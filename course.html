<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Course - ProjetVNET</title>
  <link rel="stylesheet" href="theme.css">
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css">
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background: var(--bg-dark);
      color: var(--text-light);
      margin: 0;
      min-height: 100vh;
      position: relative;
      overflow-x: hidden;
    }

    /* Code Rain Animation */
    .code-rain {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 1;
      overflow: hidden;
    }

    .code-drop {
      position: absolute;
      color: var(--accent-green);
      font-family: 'Courier New', monospace;
      font-size: 16px;
      font-weight: bold;
      opacity: 0.9;
      animation: fall linear infinite;
      text-shadow: 0 0 10px var(--accent-green);
      z-index: 1;
    }

    .code-drop:nth-child(odd) {
      color: var(--accent-gold);
      text-shadow: 0 0 10px var(--accent-gold);
    }

    .code-drop:nth-child(3n) {
      color: #00ff88;
      text-shadow: 0 0 15px #00ff88;
    }

    .code-drop:nth-child(5n) {
      color: #ff6b6b;
      text-shadow: 0 0 12px #ff6b6b;
    }

    @keyframes fall {
      0% {
        transform: translateY(-100vh) rotate(0deg) scale(0.5);
        opacity: 0;
      }
      10% {
        opacity: 1;
        transform: translateY(-90vh) rotate(36deg) scale(1);
      }
      90% {
        opacity: 0.8;
        transform: translateY(90vh) rotate(324deg) scale(1);
      }
      100% {
        transform: translateY(100vh) rotate(360deg) scale(0.5);
        opacity: 0;
      }
    }

    @keyframes twinkle {
      0%, 100% { opacity: 0.3; }
      50% { opacity: 1; }
    }

    .code-drop.twinkle {
      animation: fall linear infinite, twinkle 2s ease-in-out infinite;
    }

    /* Matrix-style background */
    .matrix-bg {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: 
        radial-gradient(circle at 20% 80%, rgba(30, 255, 0, 0.1) 0%, transparent 50%),
        radial-gradient(circle at 80% 20%, rgba(247, 221, 173, 0.1) 0%, transparent 50%),
        linear-gradient(135deg, #0d1117 0%, #1a1a1a 50%, #2a2a2a 100%);
      animation: matrixPulse 8s ease-in-out infinite;
      z-index: 0;
    }

    @keyframes matrixPulse {
      0%, 100% { opacity: 0.3; }
      50% { opacity: 0.6; }
    }

    .navbar {
      background: rgba(18, 18, 18, 0.95);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid var(--border-light);
      padding: 15px 30px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 1000;
      box-shadow: 0 2px 20px rgba(0, 0, 0, 0.3);
    }

    .logo {
      color: var(--text-light);
      font-size: 1.8em;
      font-weight: 700;
      text-decoration: none;
      text-transform: uppercase;
      display: flex;
      align-items: center;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .logo:hover {
      color: var(--accent-green);
      transform: scale(1.05);
    }

    .logo-projet {
      color: var(--text-light);
    }

    .logo-vnet {
      color: var(--accent-gold);
    }

    .nav-right {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .back-btn {
      background: rgba(30, 255, 0, 0.1);
      border: 1px solid var(--accent-green);
      color: var(--accent-green);
      font-size: 1.2em;
      cursor: pointer;
      padding: 10px;
      border-radius: 50%;
      transition: all 0.3s ease;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .back-btn:hover {
      background: var(--accent-green);
      color: var(--bg-dark);
      transform: scale(1.1);
      box-shadow: 0 0 20px rgba(30, 255, 0, 0.4);
    }

    .profile-picture {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: linear-gradient(45deg, var(--accent-green), var(--accent-gold));
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--bg-dark);
      font-weight: 700;
      font-size: 1.2em;
      cursor: pointer;
      transition: all 0.3s ease;
      border: 2px solid var(--accent-green);
      box-shadow: 0 0 15px rgba(30, 255, 0, 0.3);
    }

    .profile-picture:hover {
      transform: scale(1.1);
      box-shadow: 0 0 25px rgba(30, 255, 0, 0.5);
    }

    .course-container {
      max-width: 1200px;
      width: 100%;
      margin: 100px auto 0;
      padding: 20px;
      position: relative;
      z-index: 10;
    }

    .course-header {
      text-align: center;
      margin-bottom: 40px;
      background: rgba(42, 42, 42, 0.9);
      backdrop-filter: blur(10px);
      border: 1px solid var(--border-light);
      border-radius: 25px;
      padding: 40px;
      box-shadow: 0 0 30px rgba(30, 255, 0, 0.2);
    }

    .course-title {
      color: var(--text-light);
      font-size: 2.5em;
      font-weight: 700;
      margin-bottom: 15px;
      background: linear-gradient(45deg, var(--accent-green), var(--accent-gold));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .course-description {
      color: var(--text-muted);
      font-size: 1.2em;
      line-height: 1.6;
      max-width: 600px;
      margin: 0 auto;
    }

    .progress-section {
      background: rgba(42, 42, 42, 0.9);
      backdrop-filter: blur(10px);
      border: 1px solid var(--border-light);
      border-radius: 25px;
      padding: 30px;
      margin-bottom: 40px;
      box-shadow: 0 0 30px rgba(30, 255, 0, 0.1);
    }

    .progress-title {
      color: var(--accent-green);
      font-size: 1.5em;
      font-weight: 600;
      margin-bottom: 20px;
      text-align: center;
    }

    .progress-bar {
      width: 100%;
      height: 20px;
      background: rgba(0, 0, 0, 0.3);
      border-radius: 10px;
      overflow: hidden;
      margin-bottom: 15px;
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--accent-green), var(--accent-gold));
      border-radius: 10px;
      transition: width 0.5s ease;
    }

    .progress-text {
      text-align: center;
      color: var(--text-muted);
      font-size: 1.1em;
    }

    .chapters-container {
      display: grid;
      gap: 30px;
    }

    .chapter {
      background: rgba(42, 42, 42, 0.9);
      backdrop-filter: blur(10px);
      border: 1px solid var(--border-light);
      border-radius: 25px;
      padding: 30px;
      box-shadow: 0 0 30px rgba(30, 255, 0, 0.1);
    }

    .chapter-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 25px;
      padding-bottom: 15px;
      border-bottom: 1px solid var(--border-light);
    }

    .chapter-title {
      color: var(--accent-gold);
      font-size: 1.8em;
      font-weight: 600;
    }

    .chapter-progress {
      color: var(--accent-green);
      font-weight: 600;
    }

    .lessons-container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 15px;
      padding: 30px;
    }

    .lesson-card {
      background: rgba(42, 42, 42, 0.9);
      backdrop-filter: blur(10px);
      border: 1px solid var(--border-light);
      border-radius: 25px;
      padding: 25px;
      cursor: pointer;
      transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      position: relative;
      overflow: hidden;
      animation: fadeUp 1.5s ease-in-out;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
    }

    .lesson-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(30, 255, 0, 0.1), transparent);
      transition: left 0.5s ease;
    }

    .lesson-card:hover::before {
      left: 100%;
    }

    .lesson-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 30px rgba(30, 255, 0, 0.3);
      border-color: var(--accent-green);
    }

    .quiz-badge {
      position: absolute;
      top: 15px;
      right: 15px;
      background: var(--accent-gold);
      color: var(--bg-dark);
      padding: 5px 10px;
      border-radius: 15px;
      font-size: 0.8em;
      font-weight: 600;
    }

    .lesson-number {
      color: var(--accent-green);
      font-size: 0.9em;
      font-weight: 600;
      margin-bottom: 10px;
    }

    .lesson-title {
      color: var(--text-light);
      font-size: 1.3em;
      font-weight: 600;
      margin-bottom: 15px;
    }

    .lesson-description {
      color: var(--text-muted);
      line-height: 1.6;
      margin-bottom: 20px;
    }

    .lesson-meta {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .lesson-duration {
      color: var(--text-muted);
      font-size: 0.9em;
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .lesson-status {
      padding: 5px 12px;
      border-radius: 15px;
      font-size: 0.8em;
      font-weight: 600;
    }

    .lesson-status.completed {
      background: rgba(30, 255, 0, 0.2);
      color: var(--accent-green);
    }

    .lesson-status.available {
      background: rgba(247, 221, 173, 0.2);
      color: var(--accent-gold);
    }

    .lesson-status.locked {
      background: rgba(255, 255, 255, 0.1);
      color: var(--text-muted);
    }

    .lesson-btn {
      width: 100%;
      background: linear-gradient(45deg, var(--accent-green), var(--accent-green-alt));
      color: var(--bg-dark);
      border: none;
      padding: 12px 20px;
      border-radius: 25px;
      cursor: pointer;
      font-weight: 600;
      font-size: 1em;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      box-shadow: 0 4px 15px rgba(30, 255, 0, 0.3);
    }

    .lesson-btn:hover:not(:disabled) {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(30, 255, 0, 0.4);
    }

    .lesson-btn:disabled {
      background: rgba(255, 255, 255, 0.1);
      color: var(--text-muted);
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }

    @keyframes fadeUp {
      from { opacity: 0; transform: translateY(30px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @media (max-width: 768px) {
      .course-container {
        padding: 10px;
        margin-top: 80px;
      }
      
      .course-title {
        font-size: 2em;
      }
      
      .lessons-container {
        grid-template-columns: 1fr;
        padding: 20px;
      }
    }

    /* AI Assistant Styles */
    .ai-assistant-btn {
      position: fixed;
      bottom: 30px;
      right: 30px;
      width: 60px;
      height: 60px;
      background: linear-gradient(45deg, var(--accent-green), var(--accent-gold));
      border: none;
      border-radius: 50%;
      color: var(--bg-dark);
      font-size: 1.5em;
      cursor: pointer;
      box-shadow: 0 4px 20px rgba(30, 255, 0, 0.4);
      transition: all 0.3s ease;
      z-index: 1000;
      animation: pulse 2s infinite;
    }

    .ai-assistant-btn:hover {
      transform: scale(1.1);
      box-shadow: 0 6px 25px rgba(30, 255, 0, 0.6);
    }

    @keyframes pulse {
      0% { box-shadow: 0 4px 20px rgba(30, 255, 0, 0.4); }
      50% { box-shadow: 0 4px 30px rgba(30, 255, 0, 0.8); }
      100% { box-shadow: 0 4px 20px rgba(30, 255, 0, 0.4); }
    }

    .ai-chat-popup {
      position: fixed;
      bottom: 100px;
      right: 30px;
      width: 350px;
      height: 500px;
      background: rgba(18, 18, 18, 0.95);
      backdrop-filter: blur(10px);
      border: 1px solid var(--accent-green);
      border-radius: 20px;
      box-shadow: 0 0 30px rgba(30, 255, 0, 0.3);
      display: none;
      flex-direction: column;
      z-index: 1001;
      overflow: hidden;
    }

    .ai-chat-popup.show {
      display: flex;
    }

    .ai-chat-header {
      background: linear-gradient(45deg, var(--accent-green), var(--accent-gold));
      color: var(--bg-dark);
      padding: 15px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-weight: 600;
    }

    .ai-chat-title {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .ai-chat-close {
      background: none;
      border: none;
      color: var(--bg-dark);
      cursor: pointer;
      font-size: 1.2em;
      padding: 5px;
      border-radius: 50%;
      transition: all 0.3s ease;
    }

    .ai-chat-close:hover {
      background: rgba(0, 0, 0, 0.2);
      transform: scale(1.1);
    }

    .ai-chat-messages {
      flex: 1;
      padding: 20px;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    .ai-message, .user-message {
      display: flex;
      gap: 10px;
      align-items: flex-start;
    }

    .ai-message i {
      color: var(--accent-green);
      font-size: 1.2em;
      margin-top: 5px;
    }

    .user-message {
      flex-direction: row-reverse;
    }

    .user-message i {
      color: var(--accent-gold);
      font-size: 1.2em;
      margin-top: 5px;
    }

    .message-content {
      background: rgba(42, 42, 42, 0.8);
      padding: 12px 15px;
      border-radius: 15px;
      color: var(--text-light);
      line-height: 1.5;
      max-width: 80%;
      word-wrap: break-word;
    }

    .ai-message .message-content {
      border-bottom-left-radius: 5px;
    }

    .user-message .message-content {
      background: rgba(30, 255, 0, 0.1);
      border: 1px solid var(--accent-green);
      border-bottom-right-radius: 5px;
    }

    .ai-chat-input {
      padding: 15px 20px;
      border-top: 1px solid var(--border-light);
      display: flex;
      gap: 10px;
      align-items: center;
    }

    .ai-chat-input input {
      flex: 1;
      background: rgba(42, 42, 42, 0.8);
      border: 1px solid var(--border-light);
      border-radius: 25px;
      padding: 10px 15px;
      color: var(--text-light);
      font-size: 0.9em;
    }

    .ai-chat-input input:focus {
      outline: none;
      border-color: var(--accent-green);
      box-shadow: 0 0 10px rgba(30, 255, 0, 0.3);
    }

    .ai-chat-input button {
      background: var(--accent-green);
      border: none;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      color: var(--bg-dark);
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .ai-chat-input button:hover {
      background: var(--accent-gold);
      transform: scale(1.1);
    }
  </style>
</head>
  <body>
  <!-- Matrix Background -->
  <div class="matrix-bg"></div>
  
  <!-- Code Rain Animation -->
  <div class="code-rain" id="codeRain"></div>

  <!-- Navigation Bar -->
  <nav class="navbar">
    <div class="logo" onclick="goToDashboard()">
      <span class="logo-projet">PROJET</span><span class="logo-vnet">VNET</span>
    </div>
    
    <div class="nav-right">
      <button class="back-btn" onclick="goBack()" title="Go Back">
        <i class="fas fa-arrow-left"></i>
      </button>
      <div class="profile-picture" onclick="goToProfile()" title="Profile">
        <i class="fas fa-user"></i>
      </div>
    </div>
  </nav>

  <!-- Course Container -->
  <div class="course-container">
    <div class="course-header">
      <h1 class="course-title" id="courseTitle">Course Title</h1>
      <p class="course-description" id="courseDescription">Course description will be loaded here</p>
    </div>

    <div class="progress-section">
      <h2 class="progress-title">Your Progress</h2>
      <div class="progress-bar">
        <div class="progress-fill" id="progressFill" style="width: 0%"></div>
      </div>
      <div class="progress-text" id="progressText">0% Complete</div>
    </div>

    <div class="chapters-container" id="chaptersContainer">
      <!-- Chapters will be generated here -->
    </div>
  </div>

  <!-- AI Assistant Button -->
  <button class="ai-assistant-btn" onclick="toggleAIChat()" title="VNET Assistant">
    <i class="fas fa-robot"></i>
  </button>

  <!-- AI Chat Popup -->
  <div class="ai-chat-popup" id="aiChatPopup">
    <div class="ai-chat-header">
      <div class="ai-chat-title">
        <i class="fas fa-robot"></i>
        <span>VNET Assistant</span>
      </div>
      <button class="ai-chat-close" onclick="toggleAIChat()">
        <i class="fas fa-times"></i>
      </button>
    </div>
    <div class="ai-chat-messages" id="aiChatMessages">
      <div class="ai-message">
        <i class="fas fa-robot"></i>
        <div class="message-content">
          ðŸ¤– Greetings, human learner! I am VNET Assistant, your robotic companion in the digital realm of coding education. 
          
          *beep boop* Initializing friendly mode... âœ…
          
          I have been monitoring your learning progress and I must say, your dedication to coding education is quite impressive! What knowledge shall we explore together today?
        </div>
      </div>
    </div>
    <div class="ai-chat-input">
      <input type="text" id="aiChatInput" placeholder="Ask me anything about your course..." onkeypress="handleAIKeyPress(event)">
      <button onclick="sendAIMessage()">
        <i class="fas fa-paper-plane"></i>
      </button>
    </div>
  </div>

  <script>
    let currentCourse = null;
    let courseProgress = {};

    // Course data
    const courses = {
      html: {
        title: "HTML & CSS Fundamentals",
        description: "Master the building blocks of web development with HTML structure and CSS styling. Perfect for beginners starting their coding journey.",
        lessons: [
          { id: 1, title: "Introduction to HTML", description: "Learn the basics of HTML structure and syntax", duration: "35 min", type: "lesson" },
          { id: 2, title: "HTML Elements and Attributes", description: "Understanding HTML elements, tags, and attributes", duration: "30 min", type: "lesson" },
          { id: 3, title: "HTML Forms and Input", description: "Creating interactive forms with HTML", duration: "25 min", type: "lesson" },
          { id: 4, title: "HTML Tables and Lists", description: "Organizing data with tables and lists", duration: "20 min", type: "lesson" },
          { id: 5, title: "HTML Quiz", description: "Test your HTML knowledge", duration: "15 min", type: "quiz" },
          { id: 6, title: "CSS Introduction", description: "Styling your HTML with CSS", duration: "30 min", type: "lesson" },
          { id: 7, title: "CSS Selectors and Properties", description: "Targeting elements and applying styles", duration: "25 min", type: "lesson" },
          { id: 8, title: "CSS Layout and Positioning", description: "Creating layouts with CSS", duration: "35 min", type: "lesson" },
          { id: 9, title: "CSS Responsive Design", description: "Making websites mobile-friendly", duration: "30 min", type: "lesson" },
          { id: 10, title: "CSS Quiz", description: "Test your CSS knowledge", duration: "15 min", type: "quiz" },
          { id: 11, title: "Advanced HTML5", description: "Modern HTML5 features and semantics", duration: "40 min", type: "lesson" },
          { id: 12, title: "CSS Grid and Flexbox", description: "Advanced layout techniques", duration: "45 min", type: "lesson" },
          { id: 13, title: "CSS Animations and Transitions", description: "Adding movement to your designs", duration: "35 min", type: "lesson" },
          { id: 14, title: "CSS Preprocessors", description: "Working with SASS and LESS", duration: "30 min", type: "lesson" },
          { id: 15, title: "Advanced CSS Quiz", description: "Test your advanced CSS knowledge", duration: "20 min", type: "quiz" },
          { id: 16, title: "Project: Personal Portfolio", description: "Build your first portfolio website", duration: "60 min", type: "lesson" },
          { id: 17, title: "Project: Business Website", description: "Create a professional business site", duration: "75 min", type: "lesson" },
          { id: 18, title: "Project: E-commerce Landing", description: "Design an e-commerce landing page", duration: "90 min", type: "lesson" },
          { id: 19, title: "Project: Mobile App Interface", description: "Create a mobile app interface", duration: "80 min", type: "lesson" },
          { id: 20, title: "Final Project Quiz", description: "Comprehensive assessment", duration: "30 min", type: "quiz" }
        ]
      },
      javascript: {
        title: "JavaScript & React Development",
        description: "Master JavaScript programming and build dynamic web applications with React framework. Take your skills to the next level.",
        lessons: [
          { id: 1, title: "JavaScript Fundamentals", description: "Variables, functions, and basic syntax", duration: "40 min", type: "lesson" },
          { id: 2, title: "Data Types and Operators", description: "Working with different data types", duration: "35 min", type: "lesson" },
          { id: 3, title: "Control Structures", description: "If statements, loops, and conditionals", duration: "30 min", type: "lesson" },
          { id: 4, title: "Functions and Scope", description: "Creating and using functions", duration: "35 min", type: "lesson" },
          { id: 5, title: "JavaScript Quiz", description: "Test your JavaScript basics", duration: "20 min", type: "quiz" },
          { id: 6, title: "Objects and Arrays", description: "Working with complex data structures", duration: "40 min", type: "lesson" },
          { id: 7, title: "DOM Manipulation", description: "Interacting with web page elements", duration: "45 min", type: "lesson" },
          { id: 8, title: "Event Handling", description: "Responding to user interactions", duration: "35 min", type: "lesson" },
          { id: 9, title: "Async JavaScript", description: "Promises, async/await, and callbacks", duration: "50 min", type: "lesson" },
          { id: 10, title: "Advanced JavaScript Quiz", description: "Test your advanced JavaScript", duration: "25 min", type: "quiz" },
          { id: 11, title: "React Introduction", description: "Getting started with React", duration: "45 min", type: "lesson" },
          { id: 12, title: "Components and Props", description: "Building reusable components", duration: "40 min", type: "lesson" },
          { id: 13, title: "State and Lifecycle", description: "Managing component state", duration: "50 min", type: "lesson" },
          { id: 14, title: "Hooks and Effects", description: "Modern React patterns", duration: "55 min", type: "lesson" },
          { id: 15, title: "React Quiz", description: "Test your React knowledge", duration: "30 min", type: "quiz" },
          { id: 16, title: "Project: Todo App", description: "Build a complete todo application", duration: "90 min", type: "lesson" },
          { id: 17, title: "Project: Weather App", description: "Create a weather application", duration: "100 min", type: "lesson" },
          { id: 18, title: "Project: E-commerce Store", description: "Build an online store", duration: "120 min", type: "lesson" },
          { id: 19, title: "Project: Social Media Dashboard", description: "Create a social media interface", duration: "110 min", type: "lesson" },
          { id: 20, title: "Final Project Quiz", description: "Comprehensive assessment", duration: "40 min", type: "quiz" }
        ]
      },
      game: {
        title: "Game Development: Unity & C#",
        description: "Create amazing games using Unity engine and C# programming. Learn game development from concept to deployment.",
        lessons: [
          { id: 1, title: "Unity Basics", description: "Introduction to Unity interface", duration: "45 min", type: "lesson" },
          { id: 2, title: "C# Fundamentals", description: "Programming basics for Unity", duration: "50 min", type: "lesson" },
          { id: 3, title: "Game Objects and Components", description: "Working with Unity objects", duration: "40 min", type: "lesson" },
          { id: 4, title: "Physics and Collisions", description: "Adding physics to your game", duration: "55 min", type: "lesson" },
          { id: 5, title: "Unity Quiz", description: "Test your Unity basics", duration: "25 min", type: "quiz" },
          { id: 6, title: "Player Movement", description: "Creating character controls", duration: "60 min", type: "lesson" },
          { id: 7, title: "Enemy AI", description: "Programming enemy behavior", duration: "70 min", type: "lesson" },
          { id: 8, title: "UI and Menus", description: "Creating game interfaces", duration: "45 min", type: "lesson" },
          { id: 9, title: "Audio and Effects", description: "Adding sound and visual effects", duration: "50 min", type: "lesson" },
          { id: 10, title: "Game Design Quiz", description: "Test your game design knowledge", duration: "30 min", type: "quiz" },
          { id: 11, title: "Level Design", description: "Creating engaging game levels", duration: "80 min", type: "lesson" },
          { id: 12, title: "Advanced C#", description: "Advanced programming concepts", duration: "65 min", type: "lesson" },
          { id: 13, title: "Multiplayer Basics", description: "Adding multiplayer features", duration: "90 min", type: "lesson" },
          { id: 14, title: "Optimization", description: "Making your game run smoothly", duration: "55 min", type: "lesson" },
          { id: 15, title: "Advanced Unity Quiz", description: "Test your advanced Unity skills", duration: "35 min", type: "quiz" },
          { id: 16, title: "Project: 2D Platformer", description: "Build a complete 2D game", duration: "150 min", type: "lesson" },
          { id: 17, title: "Project: 3D Adventure", description: "Create a 3D adventure game", duration: "180 min", type: "lesson" },
          { id: 18, title: "Project: Mobile Game", description: "Develop for mobile platforms", duration: "200 min", type: "lesson" },
          { id: 19, title: "Project: VR Experience", description: "Create a VR game", duration: "220 min", type: "lesson" },
          { id: 20, title: "Final Project Quiz", description: "Comprehensive assessment", duration: "45 min", type: "quiz" }
        ]
      }
    };

    // Initialize course
    function initCourse() {
      const courseType = localStorage.getItem('selectedCourse') || 'html';
      currentCourse = courseType;
      
      // Load course data
      const courseData = courses[courseType];
      if (!courseData) {
        alert('Course not found!');
        goToDashboard();
        return;
      }

      // Update course header
      document.getElementById('courseTitle').textContent = courseData.title;
      document.getElementById('courseDescription').textContent = courseData.description;

      // Load progress
      loadProgress();

      // Generate chapters
      generateChapters(courseData.lessons);

      // Start code rain animation
      createCodeRain();
    }

    // Load user progress
    function loadProgress() {
      const savedProgress = localStorage.getItem(`courseProgress_${currentCourse}`);
      if (savedProgress) {
        courseProgress = JSON.parse(savedProgress);
      } else {
        courseProgress = {};
      }
      updateOverallProgress();
    }

    // Update overall progress
    function updateOverallProgress() {
      const totalLessons = 20;
      const completedLessons = Object.values(courseProgress).filter(status => status === 'completed').length;
      const progressPercent = Math.round((completedLessons / totalLessons) * 100);
      
      document.getElementById('progressFill').style.width = progressPercent + '%';
      document.getElementById('progressText').textContent = `${progressPercent}% Complete (${completedLessons}/${totalLessons} lessons)`;
    }

    // Generate chapters
    function generateChapters(lessons) {
      const container = document.getElementById('chaptersContainer');
      container.innerHTML = '';

      // Group lessons into chapters of 5
      for (let i = 0; i < lessons.length; i += 5) {
        const chapterLessons = lessons.slice(i, i + 5);
        const chapterIndex = Math.floor(i / 5);
        
        // Calculate chapter progress
        const chapterCompleted = chapterLessons.filter(lesson => courseProgress[lesson.id] === 'completed').length;
        const chapterProgress = Math.round((chapterCompleted / chapterLessons.length) * 100);

        const chapter = document.createElement('div');
        chapter.className = 'chapter';
        chapter.innerHTML = `
          <div class="chapter-header">
            <span class="chapter-title">Chapter ${chapterIndex + 1}</span>
            <div class="chapter-progress">${chapterProgress}% Complete</div>
          </div>
          <div class="lessons-container">
            ${chapterLessons.map((lesson, index) => {
              const status = courseProgress[lesson.id] || 'locked';
              
              // Fix unlock logic: First lesson of first chapter is always available
              // Other lessons are available if previous lesson is completed
              let isAvailable = false;
              if (chapterIndex === 0 && index === 0) {
                isAvailable = true; // First lesson is always available
              } else if (status === 'completed' || status === 'available') {
                isAvailable = true;
              } else if (status === 'locked') {
                // Check if previous lesson is completed
                const prevLessonId = lesson.id - 1;
                if (courseProgress[prevLessonId] === 'completed') {
                  isAvailable = true;
                  courseProgress[lesson.id] = 'available';
                  saveProgress();
                }
              }

              return `
                <div class="lesson-card" style="animation-delay: ${index * 0.1}s">
                  ${lesson.type === 'quiz' ? '<div class="quiz-badge">QUIZ</div>' : ''}
                  <div class="lesson-number">Lesson ${lesson.id}</div>
                  <h3 class="lesson-title">${lesson.title}</h3>
                  <p class="lesson-description">${lesson.description}</p>
                  <div class="lesson-meta">
                    <div class="lesson-duration">
                      <i class="fas fa-clock"></i>
                      ${lesson.duration}
                    </div>
                    <div class="lesson-status ${isAvailable ? (status === 'completed' ? 'completed' : 'available') : 'locked'}">
                      ${isAvailable ? (status === 'completed' ? 'Completed' : 'Available') : 'Locked'}
                    </div>
                  </div>
                  <button class="lesson-btn" ${!isAvailable ? 'disabled' : ''} 
                          onclick="${isAvailable ? `startLesson(${lesson.id}, '${lesson.type}')` : ''}">
                    <i class="fas fa-${lesson.type === 'quiz' ? 'question-circle' : 'play'}"></i>
                    ${lesson.type === 'quiz' ? 'Start Quiz' : 'Start Lesson'}
                  </button>
                </div>
              `;
            }).join('')}
          </div>
        `;

        container.appendChild(chapter);
      }
    }

    // Start lesson
    function startLesson(lessonId, type) {
      // Mark lesson as started
      courseProgress[lessonId] = 'in-progress';
      saveProgress();

      if (type === 'quiz') {
        // Open quiz in code editor
        localStorage.setItem('currentQuiz', lessonId);
        localStorage.setItem('currentCourse', currentCourse);
        window.location.href = 'code-editor.html?mode=quiz';
      } else {
        // Open lesson content page first
        localStorage.setItem('currentLesson', lessonId);
        localStorage.setItem('currentCourse', currentCourse);
        window.location.href = 'lesson.html';
      }
    }

    // Save progress
    function saveProgress() {
      localStorage.setItem(`courseProgress_${currentCourse}`, JSON.stringify(courseProgress));
    }

    // Navigation functions
    function goToDashboard() {
      window.location.href = 'dashboard.html';
    }

    function goToProfile() {
      window.location.href = 'profile.html';
    }

    function goBack() {
      window.history.back();
    }

    // AI Assistant Functions
    function toggleAIChat() {
      const chatPopup = document.getElementById('aiChatPopup');
      chatPopup.classList.toggle('show');
    }

    function handleAIKeyPress(event) {
      if (event.key === 'Enter') {
        sendAIMessage();
      }
    }

    function sendAIMessage() {
      const input = document.getElementById('aiChatInput');
      const message = input.value.trim();
      
      if (message) {
        addMessage(message, 'user');
        input.value = '';
        
        // Generate AI response
        setTimeout(() => {
          const response = generateAIResponse(message);
          addMessage(response, 'ai');
        }, 1000);
      }
    }

    function addMessage(text, sender) {
      const messagesContainer = document.getElementById('aiChatMessages');
      const messageDiv = document.createElement('div');
      messageDiv.className = `${sender}-message`;
      
      const icon = document.createElement('i');
      icon.className = sender === 'ai' ? 'fas fa-robot' : 'fas fa-user';
      
      const content = document.createElement('div');
      content.className = 'message-content';
      content.textContent = text;
      
      messageDiv.appendChild(icon);
      messageDiv.appendChild(content);
      
      messagesContainer.appendChild(messageDiv);
      messagesContainer.scrollTop = messagesContainer.scrollHeight;
    }

    function generateAIResponse(userMessage) {
      const message = userMessage.toLowerCase();
      const courseType = currentCourse || 'html';
      const courseName = courses[courseType]?.title || 'this course';
      const progress = getProgressStats();
      
      // AI responses based on user input
      if (message.includes('hello') || message.includes('hi') || message.includes('hey')) {
        return `ðŸ¤– Greetings, human learner! I am VNET Assistant, your robotic companion in the digital realm of ${courseName}. 

*beep boop* Initializing friendly mode... âœ…

I have been monitoring your learning progress and I must say, your dedication to coding education is quite impressive! What knowledge shall we explore together today?`;
      }
      
      if (message.includes('help') || message.includes('assist')) {
        return `ðŸ¤– *processing assistance request* 

Greetings! I am VNET Assistant, your AI learning companion. My neural networks are optimized to provide:

â€¢ ðŸ“š Deep explanations of ${courseName} concepts
â€¢ ðŸ—ºï¸ Personalized study roadmaps and learning paths
â€¢ ðŸ› Code debugging and error analysis
â€¢ ðŸ’¡ Learning strategies and best practices
â€¢ ðŸ“Š Progress tracking and achievement notifications
â€¢ ðŸŽ¯ Course navigation and lesson recommendations

*beep* What specific assistance do you require, human?`;
      }
      
      if (message.includes('roadmap') || message.includes('path') || message.includes('plan')) {
        const progressPercent = Math.round((progress.completed / progress.total) * 100);
        return `ðŸ¤– *analyzing learning trajectory* 

Excellent question! Based on your current progress (${progressPercent}% complete), here is your optimized learning roadmap for ${courseName}:

ðŸ“ˆ **Phase 1: Foundation** (Lessons 1-5) - ${progress.completed >= 5 ? 'âœ… COMPLETED' : 'ðŸ”„ IN PROGRESS'}
   Master the fundamental concepts and syntax

ðŸ“ˆ **Phase 2: Intermediate** (Lessons 6-10) - ${progress.completed >= 10 ? 'âœ… COMPLETED' : 'â³ UPCOMING'}
   Build practical skills and problem-solving

ðŸ“ˆ **Phase 3: Advanced** (Lessons 11-15) - ${progress.completed >= 15 ? 'âœ… COMPLETED' : 'â³ UPCOMING'}
   Complex concepts and advanced techniques

ðŸ“ˆ **Phase 4: Mastery** (Lessons 16-20) - ${progress.completed >= 20 ? 'âœ… COMPLETED' : 'â³ UPCOMING'}
   Real-world projects and professional skills

*beep* Recommendation: Complete each phase sequentially for optimal learning efficiency!`;
      }
      
      if (message.includes('progress') || message.includes('completed') || message.includes('finished') || message.includes('status')) {
        const progressPercent = Math.round((progress.completed / progress.total) * 100);
        const nextLesson = progress.completed + 1;
        return `ðŸ¤– *scanning learning database* 

Progress Report - ${courseName}:
ðŸ“Š **Completion Status**: ${progress.completed}/${progress.total} lessons (${progressPercent}%)
ðŸŽ¯ **Next Target**: Lesson ${nextLesson}
â­ **Current Streak**: ${progress.streak} days
ðŸ† **Achievements Unlocked**: ${progress.achievements}

*beep boop* Analysis complete! Your learning trajectory is ${progressPercent > 50 ? 'excellent' : 'good'}. 

${progressPercent < 25 ? 'ðŸ’¡ Suggestion: Focus on completing the foundation lessons first!' : ''}
${progressPercent >= 25 && progressPercent < 50 ? 'ðŸ’¡ Suggestion: You\'re making great progress! Consider reviewing completed lessons.' : ''}
${progressPercent >= 50 ? 'ðŸ’¡ Suggestion: Excellent work! You\'re ready for advanced concepts!' : ''}

Would you like me to generate a personalized study plan?`;
      }
      
      // Default response
      return `ðŸ¤– *processing input* 

Greetings! I am VNET Assistant, your AI learning companion in the ${courseName} journey. 

*beep boop* My neural networks are ready to assist with:
â€¢ ðŸ“š Concept explanations and deep dives
â€¢ ðŸ—ºï¸ Personalized learning roadmaps
â€¢ ðŸ› Code debugging and optimization
â€¢ ðŸ’¡ Learning strategies and tips
â€¢ ðŸ“Š Progress tracking and notifications
â€¢ ðŸŽ¯ Study recommendations

*beep* What knowledge shall we explore together today, human?`;
    }

    // Get progress statistics
    function getProgressStats() {
      const total = 20; // Total lessons
      const completed = Object.values(courseProgress).filter(status => status === 'completed').length;
      const streak = parseInt(localStorage.getItem('learningStreak') || '0');
      const achievements = Math.floor(completed / 5); // Achievement every 5 lessons
      
      return {
        total,
        completed,
        streak,
        achievements
      };
    }

    // Code Rain Animation
    function createCodeRain() {
      const codeRain = document.getElementById('codeRain');
      const characters = ['0', '1', '{}', '[]', '()', ';', '=', '!', '&', '|', '<', '>', '/', '\\', '*', '+', '-', '%', 'function', 'const', 'let', 'var', 'if', 'else', 'for', 'while', 'return', 'class', 'import', 'export'];
      
      function createDrop() {
        const drop = document.createElement('div');
        drop.className = 'code-drop';
        
        if (Math.random() < 0.3) {
          drop.classList.add('twinkle');
        }
        
        drop.textContent = characters[Math.floor(Math.random() * characters.length)];
        drop.style.left = Math.random() * 100 + '%';
        drop.style.animationDuration = (Math.random() * 4 + 3) + 's';
        drop.style.animationDelay = Math.random() * 1 + 's';
        drop.style.fontSize = (Math.random() * 8 + 12) + 'px';
        
        codeRain.appendChild(drop);
        
        setTimeout(() => {
          if (drop.parentNode) {
            drop.parentNode.removeChild(drop);
          }
        }, 7000);
      }
      
      setInterval(createDrop, 150);
      
      for (let i = 0; i < 20; i++) {
        setTimeout(createDrop, i * 100);
      }
    }

    // Initialize when page loads
    document.addEventListener('DOMContentLoaded', initCourse);
  </script>
</body>
</html>
